#!/bin/bash

for d in $(zpool status | grep -i ata-ST2 | xargs)
do 
    drive=$(readlink "/dev/disk/by-id/${d}")
    drive=$(basename "${drive}"
    echo "---------------------------------"
    echo "device: /dev/disk/by-id/${d}"
    echo "drive: /dev/${drive}"
    sudo smartctl -x "/dev/disk/by-id/${d}"
done

