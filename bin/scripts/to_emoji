#!/bin/bash 
# Repurposed from https://github.com/rwxrob/dot/blob/main/scripts/toemoji
# Pipe a file into to_emoji and it will repplace the contents

to_emoji() {
    declare -A emoji
    emoji[smile]=ðŸ˜ƒ
    emoji[bear]=ðŸ»
    emoji[hamburger]=ðŸ”
    emoji[lightbulb]=ðŸ’¡
    emoji[idea]=ðŸ’¡
    emoji[comment]=ðŸ’¬
    emoji[chat]=ðŸ’¬
    emoji[pomo]=ðŸ…
    emoji[stop]=ðŸ›‘
    emoji[warning]=âš ï¸
    emoji[rant]=ðŸ¤¬
    emoji[tv]=ðŸ“º
    emoji[update]=ðŸ“°
    emoji[tux]=ðŸ§
    emoji[tux]=ðŸ§
    emoji[yoga]=ðŸ§˜
    emoji[facepalm]=ðŸ¤¦

    local in=/dev/stdin
    local out=/dev/stdout
    local file="$1"
    if [[ -n $file ]];then
        in="$file"
        out="$(mktemp)"
    fi
    IFS=$'\n'
    while read -r line; do 
        for k in "${!emoji[@]}"; do 
            line=${line//:$k:/${emoji[$k]}}
        done
        echo "$line" >> "$out"
    done < "$in"
    if [[ -n $file ]]; then
        cp "$out" "$file"
        rm "$out"
    fi
}

to_emoji $@
