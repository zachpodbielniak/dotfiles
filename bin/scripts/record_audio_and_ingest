#!/bin/bash 
# records audio with ffmpeg from dummy monitor,
# after recording, it transcribes the audio 
# to get a text output of the audio, then it
# sends that to an ai summarizer to get the
# a summary im markdown. lastly, it ingests
# the summary into our second brain and passes 
# all arguments to 'sbi' that this script gets

filename="${HOME}/Documents/recordings/$(date +'%Y-%m-%d_%H-%M-%S').ogg"

# record the audio
record_audio "${filename}"

# post processing with whisper-cpp
# txt output is stored at ${filename}.txt
transcribe_audio "${filename}"

# after done transcribing, lets summarize it as markdown
ai_summary_as_markdown < "${filename}.txt" > "${filename}.md"

# ingest into second brain
sbi ${@} "${filename}.md"

