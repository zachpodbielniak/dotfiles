#!/bin/bash
# dotfiles - Personal configuration files and scripts
# Copyright (C) 2025  Zach Podbielniak
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
set -euo pipefail
usage() {
    cat << 'USAGE'
now_timestamp - Get current Unix timestamp
USAGE:
now_timestamp [OPTIONS]
OPTIONS:
-h, --help      Show this help message
--license       Show license information
--millis        Return milliseconds instead of seconds
EXAMPLES:
now_timestamp
# Output: 1734276000

now_timestamp --millis
# Output: 1734276000000
USAGE
}

millis=0
case "${1:-}" in
    -h|--help) usage; exit 0 ;;
    --license) echo "AGPLv3"; exit 0 ;;
    --millis) millis=1 ;;
    *) [[ -n "${1:-}" ]] && { echo "Unknown option: ${1}" >&2; usage >&2; exit 1; } ;;
esac

if [[ $millis -eq 1 ]]; then
    date +%s%3N
else
    date +%s
fi
