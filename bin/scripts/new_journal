#!/bin/bash 
set -euo pipefail
    
notes_path="${HOME}/Documents/notes"
today="$(today)"
year="$(date +%Y)"
month="$(date +%m)"
full_path="${notes_path}/02_areas/personal/journal/${year}/${month}/${today}.md"

if [[ ! -d "$(dirname ${full_path})" ]]
then 
    mkdir -p "$(dirname ${full_path})"
fi
    
if [[ -f "${full_path}" ]]
then 
    cd "${notes_path}"
    exec nvim "${full_path}"
else 
    cd "${notes_path}"
    template_journal > "${full_path}"
    exec nvim "${full_path}"
fi

