#!/bin/bash 
set -euo pipefail

if [ $# -eq 0 ]; then
    echo "Usage: $0 <word>"
else
    word="$1"
    
    if [[ $(type yq 2>/dev/null >/dev/null) -eq 0 ]]
    then
        defs=$(curl --silent "https://api.dictionaryapi.dev/api/v2/entries/en/$word" | yq -p json .[].meanings[].definitions[].definition)
    elif [[ $(type jq 2>/dev/null >/dev/null) -eq 0 ]]
    then 
        defs=$(curl --silent "https://api.dictionaryapi.dev/api/v2/entries/en/$word" | jq .[].meanings[].definitions[].definition)
    else 
        echo "$0 requires yq or jq. install either"
        exit 1
    fi

    while read -r line; do
        quotes_removed=$(sed 's/"//g' <<<$line)
        echo "- $quotes_removed"
    done <<< "$defs"
fi

