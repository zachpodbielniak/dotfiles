#!/bin/bash 

# dotfiles - Personal configuration files and scripts
# Copyright (C) 2025  Zach Podbielniak
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.
#
# You should have received a copy of the GNU Affero General Public License
# along with this program.  If not, see <https://www.gnu.org/licenses/>.

# Repurposed from https://github.com/rwxrob/dot/blob/main/scripts/toemoji
# Pipe a file into to_emoji and it will repplace the contents

to_emoji() {
    declare -A emoji
    emoji[smile]=ðŸ˜ƒ
    emoji[bear]=ðŸ»
    emoji[hamburger]=ðŸ”
    emoji[lightbulb]=ðŸ’¡
    emoji[idea]=ðŸ’¡
    emoji[comment]=ðŸ’¬
    emoji[chat]=ðŸ’¬
    emoji[pomo]=ðŸ…
    emoji[stop]=ðŸ›‘
    emoji[warning]=âš ï¸
    emoji[rant]=ðŸ¤¬
    emoji[tv]=ðŸ“º
    emoji[update]=ðŸ“°
    emoji[tux]=ðŸ§
    emoji[tux]=ðŸ§
    emoji[yoga]=ðŸ§˜
    emoji[facepalm]=ðŸ¤¦
    emoji[money]=ðŸ’°
    emoji[creditcard]=ðŸ’³

    local in=/dev/stdin
    local out=/dev/stdout
    local file="$1"
    if [[ -n $file ]];then
        in="$file"
        out="$(mktemp)"
    fi
    IFS=$'\n'
    while read -r line; do 
        for k in "${!emoji[@]}"; do 
            line=${line//:$k:/${emoji[$k]}}
        done
        echo "$line" >> "$out"
    done < "$in"
    if [[ -n $file ]]; then
        cp "$out" "$file"
        rm "$out"
    fi
}

to_emoji $@
