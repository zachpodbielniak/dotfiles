#!/bin/bash

set -euo pipefail

usage() {
	cat << 'EOF'
run_if_exists - Run command only if executable exists

USAGE: run_if_exists [OPTIONS] COMMAND [ARGS...]

OPTIONS:
-h, --help      Show help
--license       License

EXAMPLES:
run_if_exists ls -la /tmp
run_if_exists which_command arg1 arg2
EOF
}

[[ "${1:-}" == "-h" || "${1:-}" == "--help" ]] && { usage; exit 0; }
[[ "${1:-}" == "--license" ]] && { echo "AGPLv3"; exit 0; }

cmd="${1:-}"
[[ -z "$cmd" ]] && { echo "run_if_exists: COMMAND required" >&2; exit 1; }
shift

# Check if command exists and run it
if type "$cmd" &>/dev/null; then
	"$cmd" "$@"
else
	echo "Command not found: $cmd" >&2
	exit 1
fi
