#!/bin/bash
set -euo pipefail
usage() { cat << 'USAGE'
date_to_unix - Convert date string to Unix timestamp
USAGE: date_to_unix [OPTIONS]
OPTIONS:
-h, --help      Show this help message
--license       Show license information
--format FMT    Input date format (default: %Y-%m-%d %H:%M:%S)
EXAMPLES:
echo "2024-01-01 00:00:00" | date_to_unix
# Output: 1704067200
USAGE
exit 0; }
[[ "${1:-}" == "-h" || "${1:-}" == "--help" ]] && usage
[[ "${1:-}" == "--license" ]] && { echo "AGPLv3"; exit 0; }
format="%Y-%m-%d %H:%M:%S"
[[ "${1:-}" == "--format" ]] && { format="${2}"; shift 2; }
while IFS= read -r line; do
    date -d "$line" +"$format" +%s || date -d "$line" +%s
done
